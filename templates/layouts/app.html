{% extends "layouts/base.html" %}
{% block body %}
<div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-muted border-r flex flex-col">
        <div class="p-4 flex-1">
            <!-- Logo -->
            <div class="flex items-center mb-8">
                <span class="text-2xl mr-2">â™”</span>
                <span class="text-xl font-bold">py-chess</span>
            </div>

            <!-- Navigation -->
            <ul class="uk-nav-default" data-uk-nav>
                <li id="nav-dashboard">
                    <a
                        href="/app/dashboard"
                        hx-get="/app/dashboard"
                        hx-target="#main-content"
                        hx-push-url="true"
                        class="flex items-center"
                    >
                        <uk-icon icon="grid" class="mr-3"></uk-icon>
                        Games
                    </a>
                </li>
                <li id="nav-new-game">
                    <a
                        href="/app/games/new"
                        hx-get="/app/games/new"
                        hx-target="#main-content"
                        hx-push-url="true"
                        class="flex items-center"
                    >
                        <uk-icon icon="plus" class="mr-3"></uk-icon>
                        New Game
                    </a>
                </li>
            </ul>
        </div>
    </aside>

    <!-- Main content area -->
    <main class="flex-1 p-8">
        <div id="main-content">
            {% if content %}
                {{ content|safe }}
            {% else %}
                {% block content %}{% endblock %}
            {% endif %}
        </div>
    </main>
</div>

<!-- Navigation active state script -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        setActiveNav();
        document.body.addEventListener("htmx:afterSettle", setActiveNav);
    });

    function setActiveNav() {
        const path = window.location.pathname;
        document
            .querySelectorAll("#nav-dashboard, #nav-new-game")
            .forEach(function (el) {
                el.classList.remove("uk-active");
            });

        if (path.startsWith("/app/dashboard")) {
            document.getElementById("nav-dashboard")?.classList.add("uk-active");
        } else if (path.startsWith("/app/games/new")) {
            document.getElementById("nav-new-game")?.classList.add("uk-active");
        }
    }
</script>
{% endblock %}
